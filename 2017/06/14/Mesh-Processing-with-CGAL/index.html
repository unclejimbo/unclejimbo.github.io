<!doctype html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Computer Graphics,CGAL,Geometry Processing," />





  <link rel="alternate" href="/atom.xml" title="unclejimbo's site" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="CGAL, which stands for the Computational Geometry Algorithms Library, is an important tool set to use and build geometric algorithms. It contains a tons of packages with various functionalities, so th">
<meta property="og:type" content="article">
<meta property="og:title" content="Mesh Processing with CGAL">
<meta property="og:url" content="https://unclejimbo.github.io/2017/06/14/Mesh-Processing-with-CGAL/index.html">
<meta property="og:site_name" content="unclejimbo's site">
<meta property="og:description" content="CGAL, which stands for the Computational Geometry Algorithms Library, is an important tool set to use and build geometric algorithms. It contains a tons of packages with various functionalities, so th">
<meta property="og:image" content="http://doc.cgal.org/latest/Surface_mesh_simplification/Illustration-Simplification-ALL.jpg">
<meta property="og:updated_time" content="2017-06-18T10:08:19.050Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mesh Processing with CGAL">
<meta name="twitter:description" content="CGAL, which stands for the Computational Geometry Algorithms Library, is an important tool set to use and build geometric algorithms. It contains a tons of packages with various functionalities, so th">
<meta name="twitter:image" content="http://doc.cgal.org/latest/Surface_mesh_simplification/Illustration-Simplification-ALL.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://unclejimbo.github.io/2017/06/14/Mesh-Processing-with-CGAL/"/>





  <title> Mesh Processing with CGAL | unclejimbo's site </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  


<!-- hexo-inject:begin --><!-- hexo-inject:end --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-97325233-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d49dcec5473b8cd98f08b6169b720538";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">unclejimbo's site</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://unclejimbo.github.io/2017/06/14/Mesh-Processing-with-CGAL/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="unclejimbo (王少东)">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/me.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="unclejimbo's site">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="unclejimbo's site" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Mesh Processing with CGAL
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-14T14:24:34+01:00">
                2017-06-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index">
                    <span itemprop="name">Computer Graphics</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/06/14/Mesh-Processing-with-CGAL/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/06/14/Mesh-Processing-with-CGAL/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="http://www.cgal.org/index.html" target="_blank" rel="external">CGAL</a>, which stands for the Computational Geometry Algorithms Library, is an important tool set to use and build geometric algorithms. It contains a tons of packages with various functionalities, so this time I’m only gonna explore a little part of this beast and figure out the basics to do mesh processing with CGAL.</p>
<p><img src="http://doc.cgal.org/latest/Surface_mesh_simplification/Illustration-Simplification-ALL.jpg" alt=""><br>(<em>Mesh smoothing algorithm, picture taken from the <a href="http://doc.cgal.org/latest/Surface_mesh_simplification/index.html#Chapter_Triangulated_Surface_Mesh_Simplification" target="_blank" rel="external">CGAL document</a></em>).</p>
<a id="more"></a>
<h1 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h1><p>First of all, I assume you already know the basics of mesh processing, especially the halfedge data structure, because all the related packages and algorithms in CGAL are implemented upon this data structure. If you don’t, <a href="https://www.openmesh.org/Daily-Builds/Doc/a00016.html" target="_blank" rel="external">here</a> is a concise introduction or you can resort to the <a href="http://www.pmp-book.org/" target="_blank" rel="external">PMP</a> book for a more comprehensive treatment.</p>
<p>And I also assume you have installed CGAL properly and run through the <a href="http://doc.cgal.org/latest/Manual/tutorial_hello_world.html" target="_blank" rel="external">hello world</a> tutorial if you haven’t used this library before.</p>
<p>Note that the stable release version of CGAL at the time of writing is 4.10.</p>
<h1 id="The-Polyhedron-3-Package"><a href="#The-Polyhedron-3-Package" class="headerlink" title="The Polyhedron_3 Package"></a>The Polyhedron_3 Package</h1><p>The <a href="http://doc.cgal.org/latest/Polyhedron/index.html#Chapter_3D_Polyhedral_Surfaces" target="_blank" rel="external">3D Polyhedral Surface</a> package, or Polyhedron_3 as its name in the program, is a pointer-based implementation of the halfedge data structure released since the 1.0 version of CGAL.</p>
<h2 id="Creation"><a href="#Creation" class="headerlink" title="Creation"></a>Creation</h2><p>There are convinient functions to create a tetrahedron though they are not very useful.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Traits &gt;</div><div class="line">Halfedge_handle CGAL::Polyhedron_3&lt; Traits &gt;::make_tetrahedron();</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Traits &gt;</div><div class="line">Halfedge_handle CGAL::Polyhedron_3&lt; Traits &gt;::make_tetrahedron(</div><div class="line">    <span class="keyword">const</span> Point&amp; p1,</div><div class="line">    <span class="keyword">const</span> Point&amp; p2,</div><div class="line">    <span class="keyword">const</span> Point&amp; p3,</div><div class="line">    <span class="keyword">const</span> Point&amp; p4 </div><div class="line">);</div></pre></td></tr></table></figure>
<p>You can also read from a file, which is what we usually need in practice. Although it only support very few common file formats like off and obj. You can also write out Polyhedron_3 to a file.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;CGAL/IO/Polyhedron_iostream.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> PolyhedronTraits_3&gt;</div><div class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;( ostream&amp; out, </div><div class="line"><span class="keyword">const</span> CGAL::Polyhedron_3&lt;PolyhedronTraits_3&gt;&amp; P);</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> PolyhedronTraits_3&gt;</div><div class="line">istream&amp; <span class="keyword">operator</span>&gt;&gt;( istream&amp; in, </div><div class="line">CGAL::Polyhedron_3&lt;PolyhedronTraits_3&gt;&amp; P);</div></pre></td></tr></table></figure>
<p>When you need to read some other file formats not supported by this package, or to build the mesh procedurally, then you should use the incremental builder. The following example shows how to build up a Polyhedron_3 mesh from a list of veritices and indices.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;CGAL/Simple_cartesian.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;CGAL/Polyhedron_3.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;CGAL/Polyhedron_incremental_builder_3.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Polyhedron_3&gt;</div><div class="line"><span class="keyword">class</span> TriMeshBuilder : <span class="keyword">public</span> CGAL::Modifier_base&lt;<span class="keyword">typename</span> Polyhedron_3::HalfedgeDS&gt;</div><div class="line">&#123;</div><div class="line">    <span class="keyword">using</span> FT = <span class="keyword">typename</span> Polyhedron_3::Traits::Kernel::FT;</div><div class="line">    <span class="keyword">using</span> HDS = <span class="keyword">typename</span> Polyhedron_3::HalfedgeDS;</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    TriMeshBuilder(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;FT&gt;&amp; vertices, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span>&gt;&amp; indices)</div><div class="line">        : _vertices(vertices), _indices(indices)</div><div class="line">    &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(HDS&amp; hds)</span></span></div><div class="line">    &#123;</div><div class="line">        CGAL::Polyhedron_incremental_builder_3&lt;HDS&gt; builder(hds, <span class="literal">true</span>);</div><div class="line">        builder.begin_surface(_vertices.size(), _indices.size() / <span class="number">3</span>);</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; _vertices.size(); i += <span class="number">3</span>) &#123;</div><div class="line">            builder.add_vertex(HDS::Vertex::Point(</div><div class="line">                _vertices[i], _vertices[i + <span class="number">1</span>], _vertices[i + <span class="number">2</span>]));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; _indices.size(); ++i) &#123;</div><div class="line">            builder.begin_facet();</div><div class="line">            builder.add_vertex_to_facet(_indices[i++]);</div><div class="line">            builder.add_vertex_to_facet(_indices[i++]);</div><div class="line">            builder.add_vertex_to_facet(_indices[i]);</div><div class="line">            builder.end_facet();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        builder.end_surface();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;FT&gt; _vertices;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span>&gt; _indices;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">using</span> Kernel = CGAL::Simple_cartesian&lt;<span class="keyword">float</span>&gt;;</div><div class="line"><span class="keyword">using</span> FT = Kernel::FT;</div><div class="line"><span class="keyword">using</span> Polyhedron_3 = CGAL::Polyhedron_3&lt;Kernel&gt;;</div><div class="line"><span class="keyword">using</span> HDS = Polyhedron_3::HalfedgeDS;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;FT&gt; vertices;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span>&gt; indices;</div><div class="line">    <span class="comment">// Fill in the data...</span></div><div class="line">    Polyhedron_3 P;</div><div class="line">    TriMeshBuilder&lt;HDS&gt; builder(vertices, indices);</div><div class="line">    P.delegate(builder);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h2><p>The key feature of a halfedge data structure is its flexibility to navigate on the mesh.</p>
<p>There are iterators you can use to iterate through vertices, halfedges, edges and facets. Keep in mind that when you dereference a iterator you’ll get the corresponding handle type. Their documentation is a bit of frustrating.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function">Vertex_iterator <span class="title">vertices_begin</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Vertix_iterator <span class="title">vertices_end</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Facet_iterator <span class="title">facets_begin</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Facet_iterator <span class="title">facets_end</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// etc</span></div></pre></td></tr></table></figure>
<p>There is also a special type of iterator called the circulator, who can iterate around a target primitive. Note that the below functions are accessed from a handle, and return a halfedge handle from which the desired primitive can be resolved.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Iterate around all the vertices of a facet,</span></div><div class="line"><span class="function">Halfedge_around_facet_circulator <span class="title">facet_begin</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// Iterate around all the vertices incident of a vertex</span></div><div class="line"><span class="function">Halfedge_around_vertex_circulator <span class="title">vertex_begin</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<p>Let’s see a concrete example to compute the valence of a mesh, I’m only showing the key part.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    Polyhedron_3 P;</div><div class="line">    <span class="keyword">for</span> (Vertex_iterator vit = P.vertices_begin(); vit != P.vertices_end(); ++vit) &#123;</div><div class="line">        <span class="keyword">auto</span> valence = <span class="number">0</span>;</div><div class="line">        Halfedge_around_vertex_circulator vcir = vit-&gt;vertex_begin();</div><div class="line">        <span class="keyword">do</span> &#123;</div><div class="line">            ++valence;</div><div class="line">        &#125; <span class="keyword">while</span>(++vcir != vit-&gt;vertex_begin());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="The-Surface-mesh-Package"><a href="#The-Surface-mesh-Package" class="headerlink" title="The Surface_mesh Package"></a>The Surface_mesh Package</h1><p>Since version 4.6, CGAL introduces a new <a href="http://doc.cgal.org/latest/Surface_mesh/index.html#sectionSurfaceMeshUsage" target="_blank" rel="external">Surface Mesh</a> package to replace the old Polyhedron_3 package. So why do we need another halfedge data structure? This <a href="http://imr.sandia.gov/papers/imr20/Sieger.pdf" target="_blank" rel="external">benchmark</a> shows that the Surface_mesh package achieves better runtime speed with less memory footprints. The reason behind this achievement is because this new package uses an index-based approach to store the mesh, rather than the pointer-based approach taken by Polyhedron_3. So it is recommended to use this package as your first choice. Although at the time of writing there are a few packages in CGAL who still don’t support Surface_mesh, so you may want to resort to Polyhedron_3 in such a situation.</p>
<p>The official examples and documentations for this package are much more well-organized. With the experience you already gained from Polyhedron_3, I’m sure you could head directly to the manual and learn how to use this package by yourself.</p>
<h1 id="Let’s-Be-More-Generic"><a href="#Let’s-Be-More-Generic" class="headerlink" title="Let’s Be More Generic"></a>Let’s Be More Generic</h1><p>From this point on, you already have enough ground to use the mesh data structures. So you could head towards to the specific mesh processing algorithm you need to use. There are quite a few packages out there, including Polygon_mesh_processing, Subdivision, Segmentation, just to name a few. But if you need to use the halfedge data structures provided by CGAL and implement your own mesh processing algorithms on top of that, then you might want to learn more on how to do this effectively.</p>
<p>If you go to check those algorithmic packages and you’ll find out that most of them support both Polyhedron_3 and Surface_mesh using the same interface. How to achieve that? Do we have to manually convert one data structure to another? Or do we have to specialize every algorithm for these two data structures? The way CGAL deals with different halfedge implementations is through concepts and traits.</p>
<p>Manifold surface meshes are in essence graphs, so CGAL defines several <a href="http://doc.cgal.org/latest/BGL/group__PkgBGLConcepts.html" target="_blank" rel="external">graph concepts</a> to abstract away the behaviour a halfedge data structure should abide. By parameterizing the mesh data type using template and programming against the graph concepts, any implementation that meets the definition of those concepts can be used by the algorithm.</p>
<p>In order to transform the interfaces of both data structures to conform to the interface required by the graph concepts, CGAL defines a lot of trait classes, which all reside in the “CGAL/boost/graph” directory. Except for Polyhedron_3 and Surface_mesh, a lot of other data structures in CGAL could also use traits to conform to the graph concepts so as to be used by the algorithms. There is even a trait class for <a href="https://www.openmesh.org/" target="_blank" rel="external">OpenMesh</a>, which is also a popular choice of halfedge implementation, defined in the file “graph_traits_TriMesh_ArrayKernelT.h”. In other words, all the algorithms written against the graph concepts could also operate on OpenMesh.</p>
<p>That’s how generic programming saves the world. In fact, the graph concepts defined by CGAL actually conform to the API defined by <a href="http://www.boost.org/doc/libs/1_64_0/libs/graph/doc/" target="_blank" rel="external">BGL</a>, a general graph library, so some basic graph algorithms like shortest path or minimum spanning tree could also operate on Polyhedron_3 and Surface_mesh. As a result, as long as you write your own algorithm using the interface defined by the graph concepts, a lot of data structures could be used with only one implementation. Awesome.</p>
<h2 id="Let’s-Be-More-Concrete"><a href="#Let’s-Be-More-Concrete" class="headerlink" title="Let’s Be More Concrete"></a>Let’s Be More Concrete</h2><p>Now I’ll show you one concrete example on how this thing works. Why don’t we just checkout the mesh fairing function from the <a href="http://doc.cgal.org/latest/Polygon_mesh_processing/group__PMP__meshing__grp.html#gaa091c8368920920eed87784107d68ecf" target="_blank" rel="external">Polygon Mesh Processing</a> package.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> TriangleMesh, <span class="keyword">typename</span> VertexRange, <span class="keyword">typename</span> NamedParameters&gt;</div><div class="line"><span class="keyword">bool</span> CGAL::Polygon_mesh_processing::fair(</div><div class="line">    TriangleMesh&amp; tmesh,</div><div class="line">    <span class="keyword">const</span> VertexRange&amp; vertices,</div><div class="line">    <span class="keyword">const</span> NamedParameters&amp; np </div><div class="line">)</div></pre></td></tr></table></figure>
<p>This function takes in a mesh and range of vertices you want to fair, and smoothes out the mesh as much as possible. The np parameter is not important here. So how does CGAL make this function work on all the data structure? We should look into the source code in file “CGAL\Polygon_mesh_processing\internal\fair_impl.h” to see what happens.</p>
<p>We could see that the algorithm is implemented with the graph concept api rather than any class-specific interface. </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//...</span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> boost::graph_traits&lt;PolygonMesh&gt;::vertex_descriptor vertex_descriptor;</div><div class="line"><span class="comment">//...</span></div><div class="line">vertex_descriptor nv = target(opposite(*circ,pmesh),pmesh);</div><div class="line"><span class="comment">//...</span></div></pre></td></tr></table></figure>
<p>And the real implementations for these apis are actually template specializations for each known data structure defined in the trait classes I mentioned earlier. You could check the implementation of Polyhedron_3 for example in “CGAL/boost/graph/graph_traits_Polyhedron_3.h”.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//...</span></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> Gt, <span class="keyword">class</span> I, CGAL_HDS_PARAM_, <span class="keyword">class</span> A&gt;</div><div class="line"><span class="keyword">struct</span> graph_traits&lt; CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt; &gt;</div><div class="line">   : CGAL::HDS_graph_traits&lt; CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt; &gt;</div><div class="line">&#123;</div><div class="line">  <span class="keyword">typedef</span> <span class="keyword">typename</span> Gt::Point_3 vertex_property_type;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//...</span></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> Gt, <span class="keyword">class</span> I, CGAL_HDS_PARAM_, <span class="keyword">class</span> A&gt;</div><div class="line"><span class="keyword">typename</span> boost::graph_traits&lt; CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt; <span class="keyword">const</span>&gt;::<span class="function">vertex_descriptor</span></div><div class="line"><span class="title">target</span><span class="params">(<span class="keyword">typename</span> boost::graph_traits&lt; CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt; <span class="keyword">const</span>&gt;::edge_descriptor e</span></div><div class="line">       , <span class="keyword">const</span> CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt; &amp; )</div><div class="line">&#123;</div><div class="line">  <span class="keyword">return</span> e.halfedge()-&gt;vertex();</div><div class="line">&#125;</div><div class="line"><span class="comment">//...</span></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> Gt, <span class="keyword">class</span> I, CGAL_HDS_PARAM_, <span class="keyword">class</span> A&gt;</div><div class="line"><span class="keyword">typename</span> boost::graph_traits&lt; CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt; &gt;::<span class="function">halfedge_descriptor</span></div><div class="line"><span class="title">opposite</span><span class="params">(<span class="keyword">typename</span> boost::graph_traits&lt; CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt; &gt;::halfedge_descriptor h</span></div><div class="line">         , <span class="keyword">const</span> CGAL::Polyhedron_3&lt;Gt,I,HDS,A&gt;&amp;)</div><div class="line">&#123;</div><div class="line">  <span class="keyword">return</span> h-&gt;opposite();</div><div class="line">&#125;</div><div class="line"><span class="comment">//...</span></div></pre></td></tr></table></figure>
<p>In this way, the compiler will automatically use the right specialization for a data structure to use. This is often called static dispatch.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>I hope that I have sorted out some of the mess about using this library. You may also be interested in reading the <a href="http://doc.cgal.org/latest/BGL/index.html#Chapter_CGAL_and_the_Boost_Graph_Library" target="_blank" rel="external">BGL package</a> and <a href="http://doc.cgal.org/latest/Property_map/index.html#Chapter_CGAL_and_Boost_Property_Maps" target="_blank" rel="external">Boost PropertyMap package</a> for further information.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Computer-Graphics/" rel="tag"># Computer Graphics</a>
          
            <a href="/tags/CGAL/" rel="tag"># CGAL</a>
          
            <a href="/tags/Geometry-Processing/" rel="tag"># Geometry Processing</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/04/03/Looping-Performance-in-C++/" rel="next" title="Looping Performance in C++">
                <i class="fa fa-chevron-left"></i> Looping Performance in C++
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/08/13/Some-Notes-on-OpenGL-Vertex-Specification/" rel="prev" title="Some Notes on OpenGL Vertex Specification">
                Some Notes on OpenGL Vertex Specification <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/me.png"
               alt="unclejimbo (王少东)" />
          <p class="site-author-name" itemprop="name">unclejimbo (王少东)</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">6</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/unclejimbo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Friends
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.csdn.net/pipisorry" title="pipi-blog" target="_blank">pipi-blog</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Preliminaries"><span class="nav-number">1.</span> <span class="nav-text">Preliminaries</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Polyhedron-3-Package"><span class="nav-number">2.</span> <span class="nav-text">The Polyhedron_3 Package</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Creation"><span class="nav-number">2.1.</span> <span class="nav-text">Creation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Navigation"><span class="nav-number">2.2.</span> <span class="nav-text">Navigation</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Surface-mesh-Package"><span class="nav-number">3.</span> <span class="nav-text">The Surface_mesh Package</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Let’s-Be-More-Generic"><span class="nav-number">4.</span> <span class="nav-text">Let’s Be More Generic</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Let’s-Be-More-Concrete"><span class="nav-number">4.1.</span> <span class="nav-text">Let’s Be More Concrete</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Conclusion"><span class="nav-number">5.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">unclejimbo (王少东)</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'unclejimbos';
      var disqus_identifier = '2017/06/14/Mesh-Processing-with-CGAL/';

      var disqus_title = "Mesh Processing with CGAL";


      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      
        var disqus_config = function () {
            this.page.url = disqus_url;
            this.page.identifier = disqus_identifier;
            this.page.title = disqus_title;
        };
        run_disqus_script('embed.js');
      

    </script>
  





  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

  


</body>
</html>
